"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var Core = (function () {
    function Core(resolver) {
        this.resolver = resolver;
        this.components = new Array();
    }
    Core.prototype.LoadComponent = function (selector) {
        var factories = Array.from(this.resolver['_factories'].values());
        var component = factories.find(function (item) { return item.selector === selector; });
        if (component) {
            this.clearComponent();
            this.selector = selector;
            var factory = this.resolver.resolveComponentFactory(component.componentType);
            var created = this.viewChild.createComponent(factory);
            this.components.push(created);
        }
    };
    Core.prototype.LoadComponents = function (selectors) {
        var _this = this;
        this.selector = "Multiple";
        selectors.forEach(function (selector) {
            var factories = Array.from(_this.resolver['_factories'].values());
            var component = factories.find(function (item) { return item.selector === selector; });
            if (component) {
                var factory = _this.resolver.resolveComponentFactory(component.componentType);
                var created = _this.viewChild.createComponent(factory);
                _this.components.push(created);
            }
        });
    };
    Core.prototype.clearComponent = function () {
        this.selector = "";
        this.components.forEach(function (component) {
            component.destroy();
        });
    };
    Core.prototype.DateToNumber = function (date) {
        var dt = new Date();
        var strDate = date.getFullYear() + this.az(date.getMonth() + 1) + this.az(date.getDate()) + this.az(dt.getHours()) + this.az(dt.getMinutes()) + this.az(dt.getSeconds());
        return parseInt(strDate);
    };
    Core.prototype.DateToKeyDay = function (date) {
        var strDate = date.getFullYear() + this.az(date.getMonth() + 1) + this.az(date.getDate());
        return parseInt(strDate);
    };
    Core.prototype.DateToKeyMonth = function (date) {
        var strDate = date.getFullYear() + this.az(date.getMonth() + 1);
        return parseInt(strDate);
    };
    Core.prototype.NumberToDate = function (num) {
        var val = num.toString();
        var year = parseInt(val.substring(0, 4));
        var month = parseInt(val.substring(4, 6));
        var day = parseInt(val.substring(6, 8));
        var hour = parseInt(val.substring(8, 10));
        var minute = parseInt(val.substring(10, 12));
        var second = parseInt(val.substring(12, 14));
        return new Date(year, month - 1, day, hour, minute, second);
    };
    Core.prototype.KeyDayToDate = function (keyDay) {
        return this.NumberToDate(parseInt(keyDay + '000000'));
    };
    Core.prototype.az = function (val) {
        var num = val.toString();
        if (num.length < 2)
            num = "0" + num;
        return num;
    };
    Core = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [core_1.ComponentFactoryResolver])
    ], Core);
    return Core;
}());
exports.Core = Core;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29yZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImNvcmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxzQ0FBeUc7QUFHekc7SUFLSSxjQUFvQixRQUFrQztRQUFsQyxhQUFRLEdBQVIsUUFBUSxDQUEwQjtRQUh0RCxlQUFVLEdBQWUsSUFBSSxLQUFLLEVBQU8sQ0FBQztJQUdnQixDQUFDO0lBRXBELDRCQUFhLEdBQXBCLFVBQXFCLFFBQWdCO1FBQ2pDLElBQUksU0FBUyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDO1FBQ2pFLElBQUksU0FBUyxHQUEyQixTQUFTLENBQUMsSUFBSSxDQUFDLFVBQUMsSUFBMkIsSUFBSyxPQUFBLElBQUksQ0FBQyxRQUFRLEtBQUssUUFBUSxFQUExQixDQUEwQixDQUFDLENBQUM7UUFDcEgsRUFBRSxDQUFBLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztZQUNYLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztZQUN0QixJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztZQUN6QixJQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLHVCQUF1QixDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsQ0FBQztZQUM3RSxJQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUN0RCxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNsQyxDQUFDO0lBQ0wsQ0FBQztJQUVNLDZCQUFjLEdBQXJCLFVBQXNCLFNBQXdCO1FBQTlDLGlCQVdDO1FBVkcsSUFBSSxDQUFDLFFBQVEsR0FBRyxVQUFVLENBQUM7UUFDM0IsU0FBUyxDQUFDLE9BQU8sQ0FBQyxVQUFBLFFBQVE7WUFDdEIsSUFBSSxTQUFTLEdBQUcsS0FBSyxD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R0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUMxQyxJQUFJLE1BQU0sR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUM3QyxJQUFJLE1BQU0sR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUU3QyxNQUFNLENBQUMsSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFLEtBQUssR0FBQyxDQUFDLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDOUQsQ0FBQztJQUVNLDJCQUFZLEdBQW5CLFVBQW9CLE1BQWM7UUFFOUIsTUFBTSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLE1BQU0sR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDO0lBQzFELENBQUM7SUFFTyxpQkFBRSxHQUFWLFVBQVcsR0FBVztRQUNsQixJQUFJLEdBQUcsR0FBRyxHQUFHLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDekIsRUFBRSxDQUFBLENBQUMsR0FBRyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7WUFDZCxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUVwQixNQUFNLENBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQztJQWxGUSxJQUFJO1FBRGhCLGlCQUFVLEVBQUU7eUNBTXFCLCtCQUF3QjtPQUw3QyxJQUFJLENBbUZoQjtJQUFELFdBQUM7Q0FBQSxBQW5GRCxJQW1GQztBQW5GWSxvQkFBSSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUsIENvbXBvbmVudEZhY3RvcnksIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciwgVmlld0NvbnRhaW5lclJlZiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgQ29yZSB7XHJcbiAgICB2aWV3Q2hpbGQ6IFZpZXdDb250YWluZXJSZWY7XHJcbiAgICBjb21wb25lbnRzOiBBcnJheTxhbnk+ID0gbmV3IEFycmF5PGFueT4oKTtcclxuICAgIHNlbGVjdG9yOiBzdHJpbmc7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSByZXNvbHZlcjogQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyKSB7IH1cclxuXHJcbiAgICBwdWJsaWMgTG9hZENvbXBvbmVudChzZWxlY3Rvcjogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IGZhY3RvcmllcyA9IEFycmF5LmZyb20odGhpcy5yZXNvbHZlclsnX2ZhY3RvcmllcyddLnZhbHVlcygpKTtcclxuICAgICAgICBsZXQgY29tcG9uZW50ID0gPENvbXBvbmVudEZhY3Rvcnk8YW55Pj4gZmFjdG9yaWVzLmZpbmQoKGl0ZW06IENvbXBvbmVudEZhY3Rvcnk8YW55PikgPT4gaXRlbS5zZWxlY3RvciA9PT0gc2VsZWN0b3IpO1xyXG4gICAgICAgIGlmKGNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyQ29tcG9uZW50KCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0b3IgPSBzZWxlY3RvcjtcclxuICAgICAgICAgICAgbGV0IGZhY3RvcnkgPSB0aGlzLnJlc29sdmVyLnJlc29sdmVDb21wb25lbnRGYWN0b3J5KGNvbXBvbmVudC5jb21wb25lbnRUeXBlKTtcclxuICAgICAgICAgICAgbGV0IGNyZWF0ZWQgPSB0aGlzLnZpZXdDaGlsZC5jcmVhdGVDb21wb25lbnQoZmFjdG9yeSk7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50cy5wdXNoKGNyZWF0ZWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgTG9hZENvbXBvbmVudHMoc2VsZWN0b3JzOiBBcnJheTxzdHJpbmc+KSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RvciA9IFwiTXVsdGlwbGVcIjtcclxuICAgICAgICBzZWxlY3RvcnMuZm9yRWFjaChzZWxlY3RvciA9PiB7XHJcbiAgICAgICAgICAgIGxldCBmYWN0b3JpZXMgPSBBcnJheS5mcm9tKHRoaXMucmVzb2x2ZXJbJ19mYWN0b3JpZXMnXS52YWx1ZXMoKSk7XHJcbiAgICAgICAgICAgIGxldCBjb21wb25lbnQgPSA8Q29tcG9uZW50RmFjdG9yeTxhbnk+PiBmYWN0b3JpZXMuZmluZCgoaXRlbTogQ29tcG9uZW50RmFjdG9yeTxhbnk+KSA9PiBpdGVtLnNlbGVjdG9yID09PSBzZWxlY3Rvcik7XHJcbiAgICAgICAgICAgIGlmKGNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGZhY3RvcnkgPSB0aGlzLnJlc29sdmVyLnJlc29sdmVDb21wb25lbnRGYWN0b3J5KGNvbXBvbmVudC5jb21wb25lbnRUeXBlKTtcclxuICAgICAgICAgICAgICAgIGxldCBjcmVhdGVkID0gdGhpcy52aWV3Q2hpbGQuY3JlYXRlQ29tcG9uZW50KGZhY3RvcnkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnRzLnB1c2goY3JlYXRlZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNsZWFyQ29tcG9uZW50KCkge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0b3IgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50cy5mb3JFYWNoKGNvbXBvbmVudCA9PiB7XHJcbiAgICAgICAgICAgIGNvbXBvbmVudC5kZXN0cm95KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIERhdGVUb051bWJlcihkYXRlOiBEYXRlKTogbnVtYmVyXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IGR0OiBEYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICBsZXQgc3RyRGF0ZSA9IGRhdGUuZ2V0RnVsbFllYXIoKSArIHRoaXMuYXooZGF0ZS5nZXRNb250aCgpKzEpICsgdGhpcy5heihkYXRlLmdldERhdGUoKSkgKyB0aGlzLmF6KGR0LmdldEhvdXJzKCkpICsgdGhpcy5heihkdC5nZXRNaW51dGVzKCkpICsgdGhpcy5heihkdC5nZXRTZWNvbmRzKCkpO1xyXG4gICAgICAgIHJldHVybiBwYXJzZUludChzdHJEYXRlKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgRGF0ZVRvS2V5RGF5KGRhdGU6IERhdGUpOiBudW1iZXJcclxuICAgIHtcclxuICAgICAgICBsZXQgc3RyRGF0ZSA9IGRhdGUuZ2V0RnVsbFllYXIoKSArIHRoaXMuYXooZGF0ZS5nZXRNb250aCgpKzEpICsgdGhpcy5heihkYXRlLmdldERhdGUoKSk7XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KHN0ckRhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBEYXRlVG9LZXlNb250aChkYXRlOiBEYXRlKTogbnVtYmVyXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IHN0ckRhdGUgPSBkYXRlLmdldEZ1bGxZZWFyKCkgKyB0aGlzLmF6KGRhdGUuZ2V0TW9udGgoKSsxKTtcclxuICAgICAgICByZXR1cm4gcGFyc2VJbnQoc3RyRGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIE51bWJlclRvRGF0ZShudW06IG51bWJlcik6IERhdGVcclxuICAgIHtcclxuICAgICAgICBsZXQgdmFsID0gbnVtLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgbGV0IHllYXIgPSBwYXJzZUludCh2YWwuc3Vic3RyaW5nKDAsIDQpKTtcclxuICAgICAgICBsZXQgbW9udGggPSBwYXJzZUludCh2YWwuc3Vic3RyaW5nKDQsIDYpKTtcclxuICAgICAgICBsZXQgZGF5ID0gcGFyc2VJbnQodmFsLnN1YnN0cmluZyg2LCA4KSk7XHJcbiAgICAgICAgbGV0IGhvdXIgPSBwYXJzZUludCh2YWwuc3Vic3RyaW5nKDgsIDEwKSk7XHJcbiAgICAgICAgbGV0IG1pbnV0ZSA9IHBhcnNlSW50KHZhbC5zdWJzdHJpbmcoMTAsIDEyKSk7XHJcbiAgICAgICAgbGV0IHNlY29uZCA9IHBhcnNlSW50KHZhbC5zdWJzdHJpbmcoMTIsIDE0KSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHllYXIsIG1vbnRoLTEsIGRheSwgaG91ciwgbWludXRlLCBzZWNvbmQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBLZXlEYXlUb0RhdGUoa2V5RGF5OiBudW1iZXIpOiBEYXRlXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuTnVtYmVyVG9EYXRlKHBhcnNlSW50KGtleURheSArICcwMDAwMDAnKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBheih2YWw6IG51bWJlcikgOiBzdHJpbmcge1xyXG4gICAgICAgIGxldCBudW0gPSB2YWwudG9TdHJpbmcoKTtcclxuICAgICAgICBpZihudW0ubGVuZ3RoIDwgMilcclxuICAgICAgICAgICAgbnVtID0gXCIwXCIgKyBudW07XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIG51bTtcclxuICAgIH1cclxufSJdfQ==